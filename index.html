<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <script src='jquery1.10.2.js'></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        body {
            height: 900px;
        }
        .move-wrapper {
            height: 300px;
            width: 100%;
            position: relative;
            top: 0;
            right: 0;
            border: 1px solid blue;
            overflow: hidden;
            box-sizing: border-box;
        }
        #move-content {
            background: gray;
            height: 280px;
            width: 80%;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>
<body>
    <div class='move-wrapper'>
        <div class="move-coontent" id='move-content'>
        </div>
    </div>


<div class="goodsdetil">
    <div class="goodsMealDiv">ddddd</div>
</div>

    <script>
        var startX,
            startY,
            startTime,
            moveEndX,
            moveEndY,
            moveEle = $('#move-content'),
            originLeft,
            originTop,
            X,
            Y;
        
        // 监听touchstart事件
        $(".move-wrapper").on("touchstart", function(event) {
             // 判断默认行为是否可以被禁用
             if (event.cancelable) {
                 // 判断默认行为是否已经被禁用
                 if (!event.defaultPrevented) {
                     event.preventDefault();
                 }
             }

            // 开始状态信息
            startTime = new Date(); // 鼠标点击开始状态时间
            console.log('startTime', startTime);
            startX = event.originalEvent.changedTouches[0].pageX;
            startY = event.originalEvent.changedTouches[0].pageY;
            // 获取moveEle初始的top和left值
            originLeft = parseInt(moveEle.css('left'));
            originTop = parseInt(moveEle.css('top'));
            
            console.log('初始值left', originLeft, '初始值top', originTop);
        });

        // 监听touchmove事件
        $('body').on('touchmove', function (event) {
            //阻止触摸事件的默认行为，即阻止滚屏
            // event.preventDefault();

            //当屏幕有多个touch或者页面被缩放过，就不执行move操作 jQuery中直接获取不到event.targetTouches 而是通过event.originalEvent.targetTouches的方式获取的
            // https://my.oschina.net/purelan/blog/271660
            if(event.originalEvent.targetTouches.length > 1 || event.scale && event.scale !== 1) {
                return;
            };

            moveEndX = event.originalEvent.changedTouches[0].pageX;
            moveEndY = event.originalEvent.changedTouches[0].pageY;
            // 算出移动的距离
            X = moveEndX - startX;
            Y = moveEndY - startY;
            console.log('移动距离X', X, '移动距离Y' + Y);
            console.log('实时top值', X, '实时left值' + Y);
            moveEle.css('left', originLeft + X + 'px');
            moveEle.css('top', originTop + Y + 'px');
        });

        // 监听move结束事件
        $('body').on('touchend', function () {
            // 鼠标点击至鼠标松开持续的时间
            var duration = + new Date() - startTime;

            console.log(duration);
            //解绑事件
            this.removeEventListener('touchmove',this,false);
            this.removeEventListener('touchend',this,false);
        });


    </script>
</body>
</html>